[% menu_settings = 'admin/directory' %]
[% content = BLOCK %]
[% INCLUDE u/settings/menu.html %]
<div id="masthead">
	<div class="container">
		<div class="masthead-pad">
			<div class="masthead-text">
				<h2>Hashtag Directory</h2>
			</div>
		</div>
	</div>
</div>
<div id="content">
	<div class="container">		
		<div class="row">
			<div class="tabbable">
				<div class="span12">
					<h2>Hashtags</h2>
					<form method="post" action="[% page.url( query => page.form.page.defined ? { page => page.form.page, } : undef, ) %]">
						<table class="table table-bordered table-highlight">
							<thead>
								<tr>
									<th>Hashtag</th>
									<th>Requested</th>
									<th>Approved</th>
								</tr>
							</thead>
							<tbody>
							[% USE X = Page( count, 10, page.form.page, ) %]
							[% FOREACH hashtag IN hashtags %]
							<tr>
								<td>[% hashtag.hashtag %]</td>
								<td>[% IF hashtag.directory_id.defined %]Yes[% ELSE %]No[% END %]</td>
								<td>
									[% IF hashtag.ts_directory.defined %]
									[% page.field(
									command => 'approve',
									type => 'checkbox',
									name => 'hashtag_id',
									opts => {
									checked => undef,
									value => hashtag.id,
									},
									) %]
									[% ELSE %]
									[% page.field(
									command => 'approve',
									type => 'checkbox',
									name => 'hashtag_id',
									opts => {
									value => hashtag.id,
									},
									) %]
									[% END %]
								</td>
							</tr>
							[% END %]
							<tr>
								<td>
									&nbsp;
								</td>
								<td>
									&nbsp;
								</td>
								<td>
									[% page.button(
									command => 'approve',
									text => 'Approve',
									type => 'submit',
									opts => {
									class => 'btn btn-primary',
									},
									) %]
								</td>
							</tr>
							<tr>
								<td colspan="3">
									<ul class="pager">
										[% IF X.previous_page > 0 %]
										<li class="previous">
										[% page.link(
										text => '&larr; Previous',
										query => {
										page => X.previous_page,
										},
										) %]
										</li>
										[% ELSE %]
										<li class="previous disabled">
										<span>&larr; Previous</span>
										</li>
										[% END %]
										[% IF X.next_page > 0 %]
										<li class="next">
										[% page.link(
										text => 'Next &rarr;',
										query => {
										page => X.next_page,
										},
										) %]
										[% ELSE %]
										<li class="next disabled">
										<span>Next &rarr;</span>
										</li>
										[% END %]
									</ul>
								</td>
							</tr>
							</tbody>
						</table>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
[% END %]
[% INCLUDE layout/internal.html %]
